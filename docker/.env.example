# MQTT Test Ecosystem - Environment Variables
# Copy to .env and customize for your environment
# Usage: cp .env.example .env && docker compose up -d

# =============================================================================
# EMQX MQTT Broker Configuration
# =============================================================================

# Dashboard credentials (default: admin/public)
EMQX_DASHBOARD_USER=admin
EMQX_DASHBOARD_PASS=public

# Rate limiting - connections per second per IP (FR-014b)
# Options: 50, 100 (default), 200, 500
EMQX_RATE_LIMIT_CONN_PER_SEC=100

# Max message payload size in bytes (FR-014a)
# Options: 65536 (64KB), 262144 (256KB default), 1048576 (1MB)
EMQX_MAX_PAYLOAD_SIZE=262144

# Session expiry interval in seconds (MQTT 5.0)
EMQX_SESSION_EXPIRY_INTERVAL=7200

# =============================================================================
# InfluxDB Time-Series Storage
# =============================================================================

# Admin credentials
INFLUXDB_USER=admin
INFLUXDB_PASS=adminpassword

# Organization and bucket
INFLUXDB_ORG=mqtt-org
INFLUXDB_BUCKET=mqtt_messages

# Message retention period (FR-030)
# Options: 12h, 24h (default), 48h, 168h (7 days)
INFLUXDB_RETENTION=24h

# API token for EMQX data bridge
INFLUXDB_TOKEN=mqtt-influxdb-token

# =============================================================================
# Prometheus Metrics Collection
# =============================================================================

# Scrape interval for EMQX metrics
PROMETHEUS_SCRAPE_INTERVAL=15s

# Retention period for metrics
PROMETHEUS_RETENTION=15d

# =============================================================================
# Grafana Dashboards
# =============================================================================

# Admin credentials
GRAFANA_USER=admin
GRAFANA_PASS=admin

# Anonymous access (disable in production)
GRAFANA_ANONYMOUS_ENABLED=false

# =============================================================================
# TLS/Security Configuration
# =============================================================================

# Certificate paths (relative to docker/certs/)
TLS_CA_CERT=ca.crt
TLS_SERVER_CERT=server.crt
TLS_SERVER_KEY=server.key

# Minimum TLS version (TLS 1.2 required per FR-018)
TLS_MIN_VERSION=tlsv1.2

# =============================================================================
# Development/Debug Options
# =============================================================================

# Enable debug logging (set to debug for troubleshooting)
LOG_LEVEL=info

# Enable EMQX trace (for specific topics/clients)
EMQX_TRACE_ENABLED=false

# Expose additional ports for debugging
DEBUG_PORTS_ENABLED=false
